<% 
const layout = 'layout';
const body = `
<h1>Database Information</h1>
<p class="lead">OrchardLite CMS Database Statistics and Schema Information</p>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>Table Statistics</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Table Name</th>
                                <th>Record Count</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Users</strong></td>
                                <td><span class="badge bg-primary">${tableInfo.Users || 0}</span></td>
                                <td>User accounts and authentication</td>
                            </tr>
                            <tr>
                                <td><strong>Roles</strong></td>
                                <td><span class="badge bg-primary">${tableInfo.Roles || 0}</span></td>
                                <td>Role-based access control</td>
                            </tr>
                            <tr>
                                <td><strong>UserRoles</strong></td>
                                <td><span class="badge bg-primary">${tableInfo.UserRoles || 0}</span></td>
                                <td>User-role relationships</td>
                            </tr>
                            <tr>
                                <td><strong>ContentItems</strong></td>
                                <td><span class="badge bg-success">${tableInfo.ContentItems || 0}</span></td>
                                <td>Pages, blog posts, content</td>
                            </tr>
                            <tr>
                                <td><strong>ContentParts</strong></td>
                                <td><span class="badge bg-success">${tableInfo.ContentParts || 0}</span></td>
                                <td>Additional content metadata (JSON)</td>
                            </tr>
                            <tr>
                                <td><strong>MediaItems</strong></td>
                                <td><span class="badge bg-warning">${tableInfo.MediaItems || 0}</span></td>
                                <td>File uploads and media library</td>
                            </tr>
                            <tr>
                                <td><strong>Settings</strong></td>
                                <td><span class="badge bg-info">${tableInfo.Settings || 0}</span></td>
                                <td>Application configuration</td>
                            </tr>
                            <tr>
                                <td><strong>AuditLogs</strong></td>
                                <td><span class="badge bg-secondary">${tableInfo.AuditLogs || 0}</span></td>
                                <td>Activity tracking and audit trail</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header">
                <h5>Database Schema Features</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Relationships</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-link text-primary"></i> Foreign key constraints</li>
                            <li><i class="fas fa-link text-primary"></i> Many-to-many relationships</li>
                            <li><i class="fas fa-link text-primary"></i> One-to-many associations</li>
                            <li><i class="fas fa-link text-primary"></i> Cascading deletes</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Modern Features</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-database text-success"></i> JSON data types</li>
                            <li><i class="fas fa-search text-success"></i> Full-text search indexes</li>
                            <li><i class="fas fa-clock text-success"></i> Timestamp tracking</li>
                            <li><i class="fas fa-shield-alt text-success"></i> UTF-8 MB4 character set</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5>Database Summary</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><strong>Database Size:</strong> ${databaseSize} MB</li>
                    <li><strong>Total Tables:</strong> 8</li>
                    <li><strong>Total Records:</strong> ${Object.values(tableInfo).reduce((sum, count) => sum + count, 0)}</li>
                    <li><strong>Character Set:</strong> utf8mb4</li>
                    <li><strong>Engine:</strong> InnoDB</li>
                </ul>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header">
                <h5>Migration Readiness</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><span class="badge bg-success">✓</span> AWS DMS Compatible</li>
                    <li><span class="badge bg-success">✓</span> Complex Schema</li>
                    <li><span class="badge bg-success">✓</span> Foreign Keys</li>
                    <li><span class="badge bg-success">✓</span> JSON Data Types</li>
                    <li><span class="badge bg-success">✓</span> Full-text Indexes</li>
                    <li><span class="badge bg-success">✓</span> Realistic Data</li>
                </ul>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header">
                <h5>Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="/admin" class="btn btn-outline-primary btn-sm">Dashboard</a>
                    <a href="/" class="btn btn-outline-success btn-sm">View Site</a>
                    <a href="/blog" class="btn btn-outline-info btn-sm">View Blog</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="alert alert-info mt-4">
    <h4>Perfect for AWS Migration Workshops!</h4>
    <p class="mb-0">This database schema demonstrates complex relationships, modern MySQL features, and realistic enterprise data patterns - ideal for showcasing AWS Database Migration Service capabilities.</p>
</div>
`;
%>

<%- include('layout', { title, body }) %>